(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{1793:function(e,a,s){!function(e){"use strict";function a(e,a,s){var t,i;return"m"===s?a?"минута":"минуту":e+" "+(t=+e,i=({ss:a?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:a?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"})[s].split("_"),t%10==1&&t%100!=11?i[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?i[1]:i[2])}var s=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:s,longMonthsParse:s,shortMonthsParse:s,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:a,m:a,mm:a,h:"час",hh:a,d:"день",dd:a,w:"неделя",ww:a,M:"месяц",MM:a,y:"год",yy:a},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,a,s){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,a){switch(a){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}})}(s(381))},9095:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/videos",function(){return s(4518)}])},4518:function(e,a,s){"use strict";s.r(a),s.d(a,{__N_SSP:function(){return u},default:function(){return f}});var t=s(5893);s(5675);var i=s(1664),c=s.n(i),n=s(1163),d=s(7294),r=s(381),l=s.n(r);s(1793);var o=s(902),_=s.n(o);let{appUrl:h,serverPort:m}=_();l().locale("ru");var u=!0;function f(e){let{videos:a,totalCount:s,itemPerPage:i=12,isAuth:r}=e,[o,_]=(0,d.useState)(1),m=(0,n.useRouter)(),u=m.query.search?"&search=".concat(m.query.search):"",f=[];for(let x=1;x<=Math.ceil(s/i);x++)f.push(x);(0,d.useEffect)(()=>{let{page:e}=m.query;e&&_(e)},m.query.page);let p=(e,a)=>m.push("/".concat(a,"/").concat(e)),g=async e=>{let a=confirm("Вы уверены, что хотите удалить видео?");if(a)try{let s=await fetch("".concat(h,"/api/videos/").concat(e),{method:"DELETE"}),t=await s.json();t.success?(alert("Видео успешно удалено"),m.reload()):alert(t.message)}catch(i){console.error(i)}};return(0,t.jsx)("div",{className:"container-fluid pb-0",children:(0,t.jsxs)("div",{className:"video-block section-padding",children:[(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-12",children:(0,t.jsxs)("div",{className:"main-title",children:[(0,t.jsxs)("div",{className:"btn-group float-right right-action",children:[(0,t.jsxs)("a",{href:"#",className:"right-action-link text-gray","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:["Сортировка"," ",(0,t.jsx)("i",{className:"fa fa-caret-down","aria-hidden":"true"})]}),(0,t.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[(0,t.jsxs)("a",{className:"dropdown-item",href:"#",children:[(0,t.jsx)("i",{className:"fas fa-fw fa-star"})," \xa0 Новые"]}),(0,t.jsxs)("a",{className:"dropdown-item",href:"#",children:[(0,t.jsx)("i",{className:"fas fa-fw fa-signal"})," \xa0 Популярные"]}),(0,t.jsxs)("a",{className:"dropdown-item",href:"#",children:[(0,t.jsx)("i",{className:"fas fa-fw fa-times-circle"})," \xa0 Закрыть"]})]})]}),(0,t.jsx)("h6",{children:m.query.search?'Поиск по запросу: "'.concat(m.query.search,'"'):"Все видео"})]})}),a.length>0&&a.map(e=>(0,t.jsx)("div",{className:"col-xl-3 col-sm-6 mb-3",children:(0,t.jsxs)("div",{className:"video-card",onClick(a){a.stopPropagation(),p(e._id,"videos")},children:[(0,t.jsxs)("div",{className:"video-card-image",children:[(0,t.jsx)("a",{className:"play-icon",href:"#",children:(0,t.jsx)("i",{className:"fas fa-play-circle"})}),(0,t.jsx)("a",{href:"#",children:(0,t.jsx)("img",{className:"img-fluid",src:e.thumbnail,alt:""})}),(0,t.jsx)("div",{className:"time",children:e.duration})]}),(0,t.jsxs)("div",{className:"video-card-body",children:[(0,t.jsx)("div",{className:"video-title","data-placement":"bottom","data-toggle":"tooltip","data-original-title":e.title,children:(0,t.jsx)("a",{href:"#",children:e.title})}),(0,t.jsxs)("div",{className:"video-page text-success",onClick(a){a.stopPropagation(),p(e.author._id,"authors")},children:["".concat(e.author.lastname," ").concat(e.author.firstname)," ",(0,t.jsx)("a",{title:"","data-placement":"top","data-toggle":"tooltip","data-original-title":"Верифицирован",href:"#",children:(0,t.jsx)("i",{className:"fas fa-check-circle text-success"})})]}),(0,t.jsxs)("div",{className:"video-view d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{children:["Просмотров: ",(+e.viewCount).toLocaleString("eng")," ","\xa0",(0,t.jsx)("i",{className:"fas fa-calendar-alt"})," ",l()(e.createdAt).fromNow()]}),r&&(0,t.jsx)("button",{className:"btn btn-primary btn-sm",onClick(a){a.stopPropagation(),g(e._id)},children:(0,t.jsx)("i",{className:"fas fa-trash"})})]})]})]})},e._id))]}),a.length>0&&(0,t.jsx)("nav",{"aria-label":"Page navigation example",children:(0,t.jsxs)("ul",{className:"pagination justify-content-center pagination-sm mb-4",children:[(0,t.jsx)("li",{className:"page-item ".concat(o<=1?"disabled":""),children:(0,t.jsx)(c(),{className:"page-link",href:"/videos?page=".concat(o-1).concat(u),tabIndex:"-1",children:"Предыдущий"})}),f.map(e=>(0,t.jsx)("li",{className:"page-item ".concat(o==e&&"active"),children:(0,t.jsx)(c(),{className:"page-link",href:"/videos?page=".concat(e).concat(u),children:e})},e)),(0,t.jsx)("li",{className:"page-item ".concat(o>=f?"disabled":""),children:(0,t.jsx)(c(),{className:"page-link",href:"/videos?page=".concat(o+1).concat(u),children:"Следующий"})})]})})]})})}}},function(e){e.O(0,[885,675,774,888,179],function(){return e(e.s=9095)}),_N_E=e.O()}]);